services:
  memory-system:
    build: .
    ports:
      - "8000:8000"  # MCP endpoint
      - "8001:8001"  # Memory API endpoint
    environment:
      - PORT=8000
      - MEMORY_SERVER_PORT=8001
      - MEMORY_API_BASE=http://localhost:8001
      - DATABASE_URL=${DATABASE_URL}
      - DB_HOST=${DB_HOST}
      - DB_NAME=${DB_NAME}
      - DB_USER=${DB_USER}
      - DB_PASSWORD=${DB_PASSWORD}
      - DB_PORT=${DB_PORT:-5432}
      - DB_SSLMODE=${DB_SSLMODE:-require}
    command: ["./start_direct.sh"]
